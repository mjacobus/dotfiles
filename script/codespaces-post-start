#!/usr/bin/env bash

MAIN_PROJECT=`pwd`

echo "CODESPACES!!!================="

set -e

if [[ ! -d /workspaces/dotfiles ]]; then
  git clone git@github.com:mjacobus/dotfiles.git /workspaces/dotfiles
fi

ln -s /workspaces/dotfiles ~/.dotfiles


# Install neovim
ln -s /workspaces ~/Projects
git clone https://github.com/neovim/neovim ~/Projects/neovim
cd ~/Projects/neovim
make -j4
sudo make install


cd $MAIN_PROJECT
bundle install
./exe/dotfiles --only=asdf
./exe/dotfiles --only=git --email=marcelo.jacobus@gmail.com
./exe/dotfiles --only=ag
./exe/dotfiles --only=tmux
./exe/dotfiles --only=vim
./exe/dotfiles --only=irb
./exe/dotfiles --only=inputrc
./exe/dotfiles --only=zshell
./exe/dotfiles --only=ctags

sudo apt-get install -y tmux

sudo apt-get install ninja-build gettext libtool libtool-bin autoconf automake cmake g++ pkg-config unzip curl

echo "`date` - Installed dotfiles" >> ~/DOTFILES_INSTALLED
